<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">

    <title>京迹——北京历史文化景点推荐系统</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/animations.css">
    <link rel="stylesheet" href="static/css/font-awesome.min.css">
    <link rel="stylesheet" href="static/css/main.css">
    <script src="static/js/vendor/modernizr-2.6.2.min.js"></script>
</head>

<body>
    <header id="header" class="light_section">
        <div class="container">
            <div class="row">
                <div class="col-sm-4">
                    <div class="logo">
                        <img src="/static/example/logo-.png" alt="" style="height: 80px;">
                    </div>
                </div>
                <!-- <a class="navbar-brand" href="#top"><img src="static/example/logo.png" alt=""></a> -->
                <div class="col-sm-8 mainmenu_wrap">
                    <div class="main-menu-icon visible-xs">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <nav>
                        <ul id="mainmenu" class="menu sf-menu responsive-menu superfish">
                            <li class="">
                                <a href="/travelhome">首页</a>
                            </li>
                            <li class="">
                                <a href="/gallery.html">景点搜索</a>
                            </li>
                            <li class="">
                                <a href="/route_design.html">景点路线规划</a>
                            </li>
                            <li class="dropdown">
                                <a href="/blog.html">博客</a>
                                <ul class="dropdown-menu">
                                    <li class="">
                                        <a href="/blog.html">博客</a>
                                    </li>
                                    <li class="">
                                        <a href="/blog-single.html">博客文章</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="active">
                                <a href="/recommendation.html">景点推荐</a>
                            </li>
                            {% if user.is_authenticated %}
                            <li class="dropdown">
                                <a href="#" style="color: #333;">欢迎您，{{ user.username }}</a>
                                <ul class="dropdown-menu">
                                    <li class="">
                                        <a href="{% url 'logout' %}">退出登录</a>
                                    </li>
                                </ul>
                            </li>
                            {% else %}
                            <li class="">
                                <a href="{% url 'login' %}" style="color: #333;">点击此处登录</a>
                            </li>
                            {% endif %}
                            <!-- <li class="">
                                <a href="./contact.html">联系</a>
                            </li> -->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <section id="middle" class="grey_section">
        <div class="container">
            <h1 style="font-size: 2.5rem; color: #2c3e50; margin-bottom: 30px; padding-bottom: 10px; border-bottom: 2px solid #3498db;">景点推荐</h1>
            <form method="post" action="{% url 'recommend' %}" class="form-inline" style="margin-bottom: 40px;">
                {% csrf_token %}
                <input type="text" name="keywords" class="form-control" placeholder="请输入关键词，例如：历史古迹、自然风光" required style="width: 600px; height: 45px; font-size: 16px; margin-right: 10px;">
                <button type="submit" class="btn btn-primary" style="height: 45px; padding: 0 20px; font-size: 16px;">获取推荐</button>
            </form>
            
            {% if spots %}
            <div class="recommendation-results">
                <h2 style="font-size: 1.8rem; color: #34495e; margin: 30px 0; font-weight: 500;">为您推荐：</h2>
                {% if error %}
                    <p class="error-message">{{ error }}</p>
                {% elif spots %}
                    <div class="row spots-grid">
                        {% for spot in spots %}
                        <div class="col-sm-3">
                            <div class="gallery-item">
                                <img src="{{ spot.src }}" class="img-responsive" alt="{{ spot.title }}">
                                <div class="gallery-item-content">
                                    <h3>{{ spot.title }}</h3>
                                    <p class="spot-description" style="display: none; max-height: 300px; overflow-y: auto; padding: 10px; border: 1px solid #eee; border-radius: 4px;">{{ spot.description }}</p>
                                    <button class="toggle-description btn btn-sm btn-outline-primary" style="margin-top: 10px;">查看描述</button>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p>没有找到与"{{ keywords }}"匹配的景点，请尝试其他关键词</p>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </section>

    <footer>
        <div class="social">
            <div class="social_icons">
                <a class="social-icons__sep" href="https://wx.qq.com/"><i class="fa fa-weixin"></i></a>
                <a class="social-icons__sep" href="https://im.qq.com/index/"><i class="fa fa-qq"></i></a>
                <a class="social-icons__sep" href="https://www.weibo.com/"><i class="fa fa-weibo"></i></a>
                <a href="https://github.com/"><i class="fa fa-github"></i></a>
            </div>
            <img alt="" src="static/example/footer_bg.jpg">
        </div>
    </footer>

    <section id="copyright" class="color_section">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 text-center">
                    &copy; UCAS 2025 - Travel Planning
                </div>
            </div>
        </div>
    </section>

    <div class="preloader">
        <div class="preloaderimg"></div>
    </div>

    <script src="static/js/vendor/jquery-1.11.1.min.js"></script>
    <script src="static/js/vendor/jquery-migrate-1.2.1.min.js"></script>
    <script src="static/js/vendor/bootstrap.min.js"></script>
    <script src="static/js/vendor/placeholdem.min.js"></script>
    <script src="static/js/vendor/hoverIntent.js"></script>
    <script src="static/js/vendor/superfish.js"></script>
    <script src="static/js/vendor/jquery.actual.min.js"></script>
    <script src="static/js/vendor/jquery.appear.js"></script>
    <script src="static/js/vendor/jquerypp.custom.js"></script>
    <script src="static/js/vendor/jquery.elastislide.js"></script>
    <script src="static/js/vendor/jquery.flexslider-min.js"></script>
    <script src="static/js/vendor/jquery.prettyPhoto.js"></script>
    <script src="static/js/vendor/jquery.easing.1.3.js"></script>
    <script src="static/js/vendor/jquery.ui.totop.js"></script>
    <script src="static/js/vendor/jquery.isotope.min.js"></script>
    <script src="static/js/vendor/jquery.easypiechart.min.js"></script>
    <script src='static/js/vendor/jflickrfeed.min.js'></script>
    <script src="static/js/vendor/jquery.sticky.js"></script>
    <script src='static/js/vendor/owl.carousel.min.js'></script>
    <script src='static/js/vendor/jquery.nicescroll.min.js'></script>
    <script src='static/js/vendor/jquery.fractionslider.min.js'></script>
    <script src='static/js/vendor/jquery.scrollTo-min.js'></script>
    <script src='static/js/vendor/jquery.localscroll-min.js'></script>
    <script src='static/js/vendor/jquery.parallax-1.1.3.js'></script>
    <script src='static/js/vendor/jquery.bxslider.min.js'></script>
    <script src='static/js/vendor/jquery.funnyText.min.js'></script>
    <script src='static/js/vendor/jquery.countTo.js'></script>
    <script src="static/js/vendor/grid.js"></script>
    <script src="static/js/plugins.js"></script>
    <script src="static/js/main.js"></script>

    <script>
    // 景点描述显示/隐藏功能
    document.addEventListener('DOMContentLoaded', function() {
        const toggleButtons = document.querySelectorAll('.toggle-description');
        toggleButtons.forEach(button => {
            button.addEventListener('click', function() {
                const description = this.previousElementSibling;
                const isVisible = description.style.display !== 'none';
                
                description.style.display = isVisible ? 'none' : 'block';
                this.textContent = isVisible ? '查看描述' : '隐藏描述';
            });
        });
    });
    </script>
</body>
</html>